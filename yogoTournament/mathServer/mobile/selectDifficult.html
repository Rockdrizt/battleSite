<!doctype html>
<html>
<head>
    <title class="languageTitle">Yogome tournament</title>
    <meta name="viewport" content="width = 1050, user-scalable = no" />
    <meta charset="UTF-8">   
    <link rel="stylesheet" type="text/css" href="assets/css/main.css" />
    <link rel="stylesheet" type="text/css" href="assets/css/dificulty.css" />
    <link rel="stylesheet" type="text/css" href="assets/css/modal.css" />
    <!-- Jquery   -->
    <script src="assets/js/lib/jquery.min.js" ></script>
    <!--  Bootstrap 3.0  -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    
    <link href="https://fonts.googleapis.com/css?family=Luckiest+Guy" rel="stylesheet">
    
    <script type="text/javascript" src="assets/js/lib/greensock/TweenMax.min.js"></script>
    <script type="text/javascript" src="assets/js/lib/iscroll-probe.js"></script>

    <script src="http://code.jquery.com/jquery-1.11.3.min.js"></script>
    <link href="http://www.jqueryscript.net/css/jquerysctipttop.css" rel="stylesheet" type="text/css">
    
</head>
    
<body>
     
    <section id="bgGradient"></section> 
    
    <section id="portrait">
    
    <div class="container font-luckiest">
        
        <div class="banner">DIFFICULTY</div>
        
        <div class="dificult-container">
            
            <div class="left-arrow"></div>
            <div class="lvl-text" style="width: 80%;">EASY</div>
            <div class="right-arrow"></div>
 
        </div>
        
        <div class="menu-container">
            
            <div class="subject-container" style="background-color: #4719ac">
                
                <div class="checkBlank checkBox0">
                    <img src="assets/images/blank_check.png"> 
                    <img class="markCheck" src="assets/images/mark_check.png">
                </div>

                <div id="adition">ADITION</div>

                <div class="plus-btn" data-type="SUM">
                    <span>custom</span>
                    <img src="assets/images/custom1.png" />
                </div>
            
            </div>
            
            <div class="subject-container" style="background-color: #ac199f">
                <div class="checkBlank checkBox1">
                    <img src="assets/images/blank_check.png"> 
                    <img class="markCheck" src="assets/images/mark_check.png">
                </div>

                <div id="substraction">SUBSTRACTION</div>

                <div class="plus-btn" data-type="SUB">
                    <span>custom</span>
                    <img src="assets/images/custom2.png" />
                </div>

            </div>
            
            <div class="subject-container" style="background-color: #e23405">
                <div class="checkBlank checkBox2">
                    <img src="assets/images/blank_check.png"> 
                    <img class="markCheck" src="assets/images/mark_check.png">
                </div>

                <div id="multiplcation">MULTIPLICATION</div>
            
                <div class="plus-btn" data-type="MUL">
                    <span>custom</span>
                    <img src="assets/images/custom3.png" />
                </div>
            </div>
            
            <div class="subject-container" style="background-color: #0096b6">
                <div class="checkBlank checkBox3">
                    <img src="assets/images/blank_check.png"> 
                    <img class="markCheck" src="assets/images/mark_check.png">
                </div>

                <div id="division">DIVISION</div>
                
                <div class="plus-btn" data-type="DIV">
                    <span>custom</span>
                    <img src="assets/images/custom4.png">
                </div>

            </div>
            
        </div>
       
        <div class="object-center">

            <button class="red-btn" type="button" onclick="window.location.href='selectSubject.html'">BACK</button>
            
            <button class="green-btn" type="button" onclick="window.location.href='customize.html'">NEXT</button>

        </div>
        
    </div>

    </section>
    
    <section id="landscape">
    
    <div class="container font-luckiest">
        
        <div class="banner">DIFFICULTY</div>
        
        <div class="dificult-container">
            
            <div class="left-arrow"></div>
            <div class="lvl-text" style="width: 40%; padding-top: 0">EASY</div>
            <div class="right-arrow"></div>
 
        </div>
        
        <div class="menu-container">
            
            <div class="subject-container" style="background-color: #4719ac">
                
                <div class="checkBlank checkBox0">
                    <img src="assets/images/blank_check.png"> 
                    <img class="markCheck" src="assets/images/mark_check.png">
                </div>

                <div id="adition">ADITION</div>

                <div class="plus-btn" data-type="SUM">
                    <span>custom</span>
                    <img src="assets/images/custom1.png" />
                </div>
            
            </div>
            
            <div class="subject-container" style="background-color: #ac199f">
                <div class="checkBlank checkBox1">
                    <img src="assets/images/blank_check.png"> 
                    <img class="markCheck" src="assets/images/mark_check.png">
                </div>

                <div id="substraction">SUBSTRACTION</div>

                <div class="plus-btn" data-type="SUB">
                    <span>custom</span>
                    <img src="assets/images/custom2.png" />
                </div>

            </div>
            
            <div class="subject-container" style="background-color: #e23405">
                <div class="checkBlank checkBox2">
                    <img src="assets/images/blank_check.png"> 
                    <img class="markCheck" src="assets/images/mark_check.png">
                </div>

                <div id="multiplcation">MULTIPLICATION</div>
            
                <div class="plus-btn" data-type="MUL">
                    <span>custom</span>
                    <img src="assets/images/custom3.png" />
                </div>
            </div>
            
            <div class="subject-container" style="background-color: #0096b6">
                <div class="checkBlank checkBox3">
                    <img src="assets/images/blank_check.png"> 
                    <img class="markCheck" src="assets/images/mark_check.png">
                </div>

                <div id="division">DIVISION</div>
                
                <div class="plus-btn" data-type="DIV">
                    <span>custom</span>
                        <img src="assets/images/custom4.png">
                </div>

            </div>
            
        </div>
       
        <div class="object-center">

            <button class="red-btn" type="button" onclick="window.location.href='selectSubject.html'">BACK</button>
            
            <button class="green-btn" type="button" onclick="setCustomRules()">NEXT</button>

        </div>
        
    </div>

    </section>
    
    <!-- modal -->
    <div id="modal" class="modal ">
        <div class="modal-content font-luckiest" >
            <div class="modal-header">
                <div class="title-modal">
                    <p>ADITION</p>
                    <div class="close-btn">
                        <img  src="assets/images/closeButton.png">
                    </div>
                </div>
                
            </div>
            
            <div class="modal-body">
            </div>
            
            <div class="modal-footer">
                <div class="ok-btn" type="button">OK</div>
            </div>
        </div>
            
    </div>


<script type="text/javascript" src="assets/js/operationGenerator.js"></script>
<script type="text/javascript" src="assets/js/modal.js"></script>
<script>

    function setCustomRules() {
		var customRules = {}

		for(var i = 1;i<=OPERATORS.length;i++){
			var ruleSetOperator = difficultSet[OPERATORS[i-1]]

			if(!operatorsObject[current_set][OPERATORS[i-1]].disable) {
				customRules[OPERATORS[i-1]] = []
				var customRulesOperator = customRules[OPERATORS[i-1]]
				for (var j = 1; j <= ruleSetOperator.length; j++) {
					if (!ruleSetOperator[j - 1].disable)
						customRulesOperator.push(ruleSetOperator[j - 1])
				}
			}

		}

		parent.customRules = customRules
		console.log(customRules)

    	window.location.href='customize.html'
	}

	var current_set = "EASY"
	var difficultSet = operationGenerator.RULES_SET[current_set]
	var ruleSet
	var OPERATORS = ["SUM", "SUB", "MUL", "DIV"]
	var DIFFICULTIES = ["EASY", "MEDIUM", "HARD", "MASTER"]
	var operatorsObject = {}

	for (var dif = 0; dif < DIFFICULTIES.length; dif++) {
		var difName = DIFFICULTIES[dif]
		operatorsObject[difName] = {}
		for (var i = 0; i < OPERATORS.length; i++) {
			var operator = OPERATORS[i]
			operatorsObject[difName][operator] = {disable: false}
		}
	}

    for(var i = 0; i < 4; i++){
        $(".checkBox" + i).attr("selection",1);

        $(".checkBox" + i).click(function(){

             if($(this).attr("selection") == 1){
                 $(this).find(".markCheck").css("display","none");
                 $(this).attr("selection",0)
             }else{
                 $(this).find(".markCheck").css("display","block");
                 $(this).attr("selection",1)
             }
        });
    }
    
    var index = 0;
    
    var lvl = ['EASY', 'MEDIUM', 'HARD', 'MASTER']
    
    $(".left-arrow").click(function(){
        if(index > 0){
            index--
        }
        else{
            index = lvl.length - 1
        }
		$(".lvl-text").text(lvl[index]);
        current_set = lvl[index]
		difficultSet = operationGenerator.RULES_SET[current_set]
    });
    
    $(".right-arrow").click(function(){
        if(index < lvl.length -1){
            index++
        }
        else{
            index = 0
        }
		$(".lvl-text").text(lvl[index]);
		current_set = lvl[index]
		difficultSet = operationGenerator.RULES_SET[current_set]
    });


	function printRule(rule, operator){
		var string = ""

		if(rule.paramToAnswer === operationGenerator.OPERATION_PARAMS.operand1)
			string += "?"
		else if(rule.operand1X) {

			for (var index = 0; index < rule.operand1X; index++){
				string += "X"
			}

		}else if(rule.operand1Const){
			string += rule.operand1Const
		}

		switch (operator){
			case "SUM":
				string+=" + "
				$(".headerDifficulty").find("p").text("ADDITION")
				break
			case "SUB":
				string+=" - "
				$(".headerDifficulty").find("p").text("SUBSTRACTION")
				break
			case "MUL":
				string+=" x "
				$(".headerDifficulty").find("p").text("MULTIPLICATION")
				break
			case "DIV":
				string+=" รท "
				$(".headerDifficulty").find("p").text("DIVISION")
				break
		}

		if(rule.paramToAnswer === operationGenerator.OPERATION_PARAMS.operand2)
			string += "?"
		else if(rule.operand2X) {

			for (var index = 0; index < rule.operand2X; index++){
				string += "X"
			}
		}else if(rule.operand2Const){
			string += rule.operand2Const
		}

		if(rule.paramToAnswer === operationGenerator.OPERATION_PARAMS.result)
			string += " = ?"
		else {
			string += " = X"
		}

		var operationExample = operationGenerator.getOperationRule(rule, operator)
		var symbol = (operationExample.operator === "/" ? "รท" : operationExample.operator)
		string += " (Example: " + operationExample.operand1 + " " + symbol + " " + operationExample.operand2 + " = " + operationExample.result + ")"

		var minRange = rule.minRange || 1
		var maxRange = rule.maxRange || 1

		string += "<br> Answer Range: " + minRange + " - " + maxRange

		return string
	}

	function getRules(operator) {

		$(".modal-body").html("")

		ruleSet = difficultSet[operator]
		for (var p = 0; p <= ruleSet.length - 1; p++) {
			var rule = ruleSet[p]

			$(".modal-body")
				.append(' <div id="operation' + p + '" class="menu-options">' +
					'<div><span>' + printRule(rule, operator) + '</span></div>' +
					'<div id="checkChoice' + p + '"  class="checkChoice" data-num="' + p +'">' +
					'<img src="assets/images/blank_check.png"> ' +
					'<img class="markCheck" src="assets/images/mark_check.png"> ' +
					'</div> ' +
					'</div>');

			if(!rule.disable)
				$("#checkChoice" + p).attr("selection",1);
			else {
				console.log("disable rule")
				$("#checkChoice" + p).find(".markCheck").css("display","none");
				$("#checkChoice" + p).attr("selection", 0);
			}


			$("#checkChoice" + p).click(function(){

				if($(this).attr("selection") == 1){
					$(this).find(".markCheck").css("display","none");
					$(this).attr("selection",0)
					var num = $(this).data("num")
					ruleSet[num].disable = true
					//aqui para guardar el deseleccionado
				}else{
					$(this).find(".markCheck").css("display","block");
					$(this).attr("selection",1)
					$(this).data("num")
					var num = $(this).data("num")
					ruleSet[num].disable = false
					//aqui para guardar el seleccionado
				}
			});


			if (p % 2 === 0) {
				$("#operation" + p).addClass("purple-back");
			}
		}
	}
    
    TweenMax.to($("#bgGradient"),10,{backgroundPosition:"0% 100%",repeat:-1,ease:Linear.easeNone});

    
</script>
    
</body>       
</html>


        
    




