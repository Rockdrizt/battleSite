<!doctype html>
<html>
<head>
    <title class="languageTitle">Yogome tournament</title>
    <meta name="viewport" content="width = 1050, user-scalable = no" />
    <meta charset="UTF-8">   
    <link rel="stylesheet" type="text/css" href="assets/css/main.css" />
    <link rel="stylesheet" type="text/css" href="assets/css/dificulty.css" />
    <link rel="stylesheet" type="text/css" href="assets/css/modal.css" />
    <!-- Jquery   -->
    <script src="assets/js/lib/jquery.min.js" ></script>
    <!--  Bootstrap 3.0  -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    
    <link href="https://fonts.googleapis.com/css?family=Luckiest+Guy" rel="stylesheet">
    
    <script type="text/javascript" src="assets/js/lib/greensock/TweenMax.min.js"></script>
    <script type="text/javascript" src="assets/js/lib/iscroll-probe.js"></script>

    <script src="http://code.jquery.com/jquery-1.11.3.min.js"></script>
    <link href="http://www.jqueryscript.net/css/jquerysctipttop.css" rel="stylesheet" type="text/css">
    
</head>
    
<body>
     
    <section id="bgGradient"></section> 
    
    <section id="portrait">
    
    <div class="container font-luckiest">
        
        <div class="banner">DIFFICULTY</div>
        
        <div class="dificult-container">
            
            <div class="left-arrow"></div>
            <div class="lvl-text" style="width: 80%;">EASY</div>
            <div class="right-arrow"></div>
 
        </div>
        
        <div class="menu-container">
            
            <div class="subject-container" style="background-color: #912e99">
                
                <div class="checkBlank checkBox0" data-type="SUM">
                    <img src="assets/images/blank_check.png"> 
                    <img class="markCheck" src="assets/images/mark_check.png">
                </div>

                <div id="adition">ADDITION</div>

                <div class="plus-btn" data-type="SUM">
                    
                    <img src="assets/images/pencil.png" />
                </div>
            
            </div>
            
            <div class="subject-container" style="background-color: #4595c0">
                <div class="checkBlank checkBox1" data-type="SUB">
                    <img src="assets/images/blank_check.png"> 
                    <img class="markCheck" src="assets/images/mark_check.png">
                </div>

                <div id="substraction">SUBTRACTION</div>

                <div class="plus-btn" data-type="SUB">
                    
                    <img src="assets/images/pencil.png" />
                </div>

            </div>
            
            <div class="subject-container" style="background-color: #c93585">
                <div class="checkBlank checkBox2" data-type="MUL">
                    <img src="assets/images/blank_check.png"> 
                    <img class="markCheck" src="assets/images/mark_check.png">
                </div>

                <div id="multiplcation">MULTIPLICATION</div>
            
                <div class="plus-btn" data-type="MUL">
                    
                    <img src="assets/images/pencil.png" />
                </div>
            </div>
            
            <div class="subject-container" style="background-color: #e6bd5f">
                <div class="checkBlank checkBox3" data-type="DIV">
                    <img src="assets/images/blank_check.png"> 
                    <img class="markCheck" src="assets/images/mark_check.png">
                </div>

                <div id="division">DIVISION</div>
                
                <div class="plus-btn" data-type="DIV">
                    
                    <img src="assets/images/pencil.png">
                </div>

            </div>
            
        </div>
       
        <div class="object-center">

            <button class="red-btn" type="button" onclick="window.location.href='selectSubject.html'">BACK</button>

            <button class="green-btn" type="button" onclick="setCustomRules()" style="font-size: 8vw">NEXT</button>

        </div>
        
    </div>

    </section>
    
    <section id="landscape">
    
    <div class="container font-luckiest">
        
        <div class="banner">DIFFICULTY</div>
        
        <div class="dificult-container">
            
            <div class="left-arrow"></div>
            <div class="lvl-text" style="width: 40%; padding-top: 0">EASY</div>
            <div class="right-arrow"></div>
 
        </div>
        
        <div class="menu-container">
            
            <div class="subject-container" style="background-color: #912e99">
                
                <div class="checkBlank checkBox0" data-type="SUM">
                    <img src="assets/images/blank_check.png"> 
                    <img class="markCheck" src="assets/images/mark_check.png">
                </div>

                <div id="adition">ADDITION</div>

                <div class="plus-btn" data-type="SUM">
                    
                    <img src="assets/images/pencil.png" />
                </div>
            
            </div>
            
            <div class="subject-container" style="background-color: #4595c0">
                <div class="checkBlank checkBox1" data-type="SUB">
                    <img src="assets/images/blank_check.png"> 
                    <img class="markCheck" src="assets/images/mark_check.png">
                </div>

                <div id="substraction">SUBTRACTION</div>

                <div class="plus-btn" data-type="SUB">
                    
                    <img src="assets/images/pencil.png" />
                </div>

            </div>
            
            <div class="subject-container" style="background-color: #c93585">
                <div class="checkBlank checkBox2" data-type="MUL">
                    <img src="assets/images/blank_check.png"> 
                    <img class="markCheck" src="assets/images/mark_check.png">
                </div>

                <div id="multiplcation">MULTIPLICATION</div>
            
                <div class="plus-btn" data-type="MUL">
                    
                    <img src="assets/images/pencil.png" />
                </div>
            </div>
            
            <div class="subject-container" style="background-color: #e6bd5f">
                <div class="checkBlank checkBox3" data-type="DIV">
                    <img src="assets/images/blank_check.png"> 
                    <img class="markCheck" src="assets/images/mark_check.png">
                </div>

                <div id="division">DIVISION</div>
                
                <div class="plus-btn" data-type="DIV">
                    
                        <img src="assets/images/pencil.png">
                </div>

            </div>
            
        </div>
       
        <div class="object-center">

            <button class="red-btn" type="button" onclick="window.location.href='selectSubject.html'">BACK</button>
            
            <button class="green-btn" type="button" onclick="setCustomRules()" >NEXT</button>

        </div>
        
    </div>

    </section>
    
    <!-- modal -->
    <div id="modal" class="modal ">
        <div class="modal-content font-luckiest" >
            <div class="modal-header">
                <div class="title-modal">
                    <p>ADITION</p>
                </div>
                
            </div>
            
            <div class="modal-body">
            </div>
            
            <div class="modal-footer">
                <div class="ok-btn" type="button">OK</div>
            </div>
        </div>
            
    </div>


<!--<script type="text/javascript" src="assets/js/operationGenerator.js"></script>-->
<script type="text/javascript" src="assets/js/modal.js"></script>
<script>
        
	var operationGenerator = parent.operationGenerator //|| operationGenerator

    function setCustomRules() {
		var customRules = {}

		for(var i = 1;i<=OPERATORS.length;i++){
			var ruleSetOperator = difficultSet[OPERATORS[i-1]]

			if(!operatorsObject[current_set][OPERATORS[i-1]].disable) {
				customRules[OPERATORS[i-1]] = []
				var customRulesOperator = customRules[OPERATORS[i-1]]
				for (var j = 1; j <= ruleSetOperator.length; j++) {
					if (!ruleSetOperator[j - 1].disable)
						customRulesOperator.push(ruleSetOperator[j - 1])
				}
			}

		}

		parent.customRules = customRules
		console.log(customRules)

    	window.location.href='customize.html'
	}

	var current_set = "EASY"
	var difficultSet = operationGenerator.RULES_SET[current_set]
	var ruleSet
	var OPERATORS = ["SUM", "SUB", "MUL", "DIV"]
	var DIFFICULTIES = ["EASY", "MEDIUM", "HARD", "MASTER"]
	var operatorsObject = {}

	for (var dif = 0; dif < DIFFICULTIES.length; dif++) {
		var difName = DIFFICULTIES[dif]
		operatorsObject[difName] = {}
		for (var i = 0; i < OPERATORS.length; i++) {
			var operator = OPERATORS[i]
			operatorsObject[difName][operator] = {disable: false}
		}
	}

	var printOperators = function () {
		for (var i = 0; i < 4; i++) {
            var operator = OPERATORS[i]

			if(operatorsObject[current_set][operator].disable){
				$(".checkBox" + i).attr("selection", 0);
				$(".checkBox" + i).find(".markCheck").css("display", "none");
			}else {
				$(".checkBox" + i).attr("selection", 1);
				$(".checkBox" + i).find(".markCheck").css("display", "block");
			}

			console.log($(".checkBox" + i).attr("selection"))

			$(".checkBox" + i).click(function () {
                console.log($(this).attr("selection"))

				if ($(this).attr("selection") === "1") {
					$(this).find(".markCheck").css("display", "none");
					$(this).attr("selection", 0)
					var type = $(this).data("type")
					operatorsObject[current_set][type].disable = true
				} else {
					$(this).find(".markCheck").css("display", "block");
					$(this).attr("selection", 1)
					var type = $(this).data("type")
					operatorsObject[current_set][type].disable = false
				}
			});
		}
	}

	printOperators()
    
    var index = 0;
    
    var lvl = ['EASY', 'MEDIUM', 'HARD', 'MASTER']
    
    $(".left-arrow").click(function(){
        if(index > 0){
            index--
        }
        else{
            index = lvl.length - 1
        }
		$(".lvl-text").text(lvl[index]);
        current_set = lvl[index]
		difficultSet = operationGenerator.RULES_SET[current_set]
        printOperators()
    });
    
    $(".right-arrow").click(function(){
        if(index < lvl.length -1){
            index++
        }
        else{
            index = 0
        }
		$(".lvl-text").text(lvl[index]);
		current_set = lvl[index]
		difficultSet = operationGenerator.RULES_SET[current_set]
        printOperators()
    });

    var operationColor

	function printRule(rule, operator){
		var string = ""

		if(rule.paramToAnswer === operationGenerator.OPERATION_PARAMS.operand1)
			string += "?"
		else if(rule.operand1X) {

			for (var index = 0; index < rule.operand1X; index++){
				string += "X"
			}

		}else if(rule.operand1Const){
			string += rule.operand1Const
		}

		string += "<span class='highlight'>"
		switch (operator){
			case "SUM":
				string+=" + "
				$(".title-modal").find("p").text("ADDITION")
				$(".modal-header").css('background-color', '#912e99')
				$(".modal-footer").css('background-color', '#912e99')
				$(".modal-body").css('background-color', '#c0b4fc')
                operationColor = '#8b7bdb'
				break
			case "SUB":
				string+=" - "
				$(".title-modal").find("p").text("SUBTRACTION")
                $(".modal-header").css('background-color', '#4595c0')
				$(".modal-footer").css('background-color', '#4595c0')
                $(".modal-body").css('background-color', '#b6e9ff')
                operationColor = '#7dc1de'
				break
			case "MUL":
				string+=" x "
				$(".title-modal").find("p").text("MULTIPLICATION")
                $(".modal-header").css('background-color', '#c93585')
				$(".modal-footer").css('background-color', '#c93585')
                $(".modal-body").css('background-color', '#ffb6e0')
                operationColor = '#de7db5'
				break
			case "DIV":
				string+=" รท "
				$(".title-modal").find("p").text("DIVISION")
                $(".modal-header").css('background-color', '#e6bd5f')
				$(".modal-footer").css('background-color', '#e6bd5f')
                $(".modal-body").css('background-color', '#ffecae')
                operationColor = '#dec576'
				break
		}
		string += "</span>"

		if(rule.paramToAnswer === operationGenerator.OPERATION_PARAMS.operand2)
			string += "?"
		else if(rule.operand2X) {

			for (var index = 0; index < rule.operand2X; index++){
				string += "X"
			}
		}else if(rule.operand2Const){
			string += rule.operand2Const
		}

		if(rule.paramToAnswer === operationGenerator.OPERATION_PARAMS.result)
			string += " <span class='highlight'>=</span> ?"
		else {
			string += " <span class='highlight'>=</span> X"
		}

		var operationExample = operationGenerator.getOperationRule(rule, operator)
		var symbol = (operationExample.operator === "/" ? "รท" : operationExample.operator)
		string += "  (Example: " + operationExample.operand1 + "<span class='highlight'> " + symbol + " </span>" + operationExample.operand2 + " <span class='highlight'>=</span> " + operationExample.result + ")"

		var minRange = rule.minRange || 1
		var maxRange = rule.maxRange || 1

		string += "<br> Answer Range: " + minRange + " - " + maxRange

		return string
	}

	function getRules(operator) {

		$(".modal-body").html("")

		ruleSet = difficultSet[operator]
		for (var p = 0; p <= ruleSet.length - 1; p++) {
			var rule = ruleSet[p]

			$(".modal-body")
				.append(' <div id="operation' + p + '" class="menu-options">' +
					'<div id="checkChoice' + p + '"  class="checkChoice" data-num="' + p +'">' +
					'<img src="assets/images/blank_check.png"> ' +
					'<img class="markCheck" src="assets/images/mark_check.png"> ' +
					'</div> ' +
                    '<div><span>' + printRule(rule, operator) + '</span></div>' +
					'</div>');

			if(!rule.disable)
				$("#checkChoice" + p).attr("selection",1);
			else {
				console.log("disable rule")
				$("#checkChoice" + p).find(".markCheck").css("display","none");
				$("#checkChoice" + p).attr("selection", 0);
			}


			$("#checkChoice" + p).click(function(){

				if($(this).attr("selection") == 1){
					$(this).find(".markCheck").css("display","none");
					$(this).attr("selection",0)
					var num = $(this).data("num")
					ruleSet[num].disable = true
					//aqui para guardar el deseleccionado
				}else{
					$(this).find(".markCheck").css("display","block");
					$(this).attr("selection",1)
					$(this).data("num")
					var num = $(this).data("num")
					ruleSet[num].disable = false
					//aqui para guardar el seleccionado
				}
			});
            
			if (p % 2 === 0) {
				$("#operation" + p).css('background-color', operationColor);
			}
		}
	}

</script>
    
</body>       
</html>


        
    




